"use strict";

var http = require('http'),
    querystring = require('querystring');

var logger = require('appium-logger');
logger = logger.getLogger('Appium');
var testwaServer = {};

var host = 'localhost';
var port = 8008;
var path = '/attp/client';

testwaServer.SendDataNativeApp = function (replyData) {
    var content = JSON.stringify(replyData);
    var options = {
        host: host,
        port: port,
        path: path,
        method: 'POST',
        header: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': content.length
        }
    };
    var req_testwa = http.request(options, function (res) {
        res.setEncoding('utf8');
        res.on('data', function (data) {
            logger.debug(" waHeart beating!");
        });
    });

    req_testwa.write(content);
    req_testwa.end();
};

testwaServer.SendStartStatus = function (datas, deviceid, testcaselogId, testwaport, res) {
    var start_path = path + '/' + deviceid + '/' + testcaselogId + '/' + testwaport;
    logger.debug("===start_path: " + start_path);
    var content = JSON.stringify(datas);
    var options = {
        host: host,
        port: port,
        path: start_path,
        method: 'POST',
        header: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': content.length
        }
    };
    var req_testwa = http.request(options, function (res) {
        res.setEncoding('utf8');
        res.on('data', function (data) {
            logger.debug("waHeart beating!");
        });
    });

    req_testwa.write(content);
    req_testwa.end();
};

testwaServer.SendDataWebview = function (datas, res) {

    var content = JSON.stringify(datas);
    var options = {
        host: host,
        port: port,
        path: path,
        method: 'POST',
        header: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': content.length
        }
    };
    var req_testwa = http.request(options, function (res) {
        res.setEncoding('utf8');
        res.on('data', function (data) {
            logger.debug("test webview case is ok!");
        });
    });

    req_testwa.write(content);
    req_testwa.end();
};

module.exports = testwaServer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYlxcdGVzdHdhXFxtaWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFFYixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQ3JCLFdBQVcsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRTFDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN0QyxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNwQyxJQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7O0FBRXRCLElBQUksSUFBSSxHQUFFLFdBQVcsQ0FBQztBQUN0QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsSUFBSSxJQUFJLEdBQUcsY0FBYyxDQUFDOztBQUcxQixZQUFZLENBQUMsaUJBQWlCLEdBQUksVUFBUyxTQUFTLEVBQUM7QUFDakQsUUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN4QyxRQUFJLE9BQU8sR0FBRztBQUNWLFlBQUksRUFBRSxJQUFJO0FBQ1YsWUFBSSxFQUFFLElBQUk7QUFDVixZQUFJLEVBQUUsSUFBSTtBQUNWLGNBQU0sRUFBRSxNQUFNO0FBQ2QsY0FBTSxFQUFFO0FBQ0osMEJBQWMsRUFBRSxtQ0FBbUM7QUFDbkQsNEJBQWdCLEVBQUUsT0FBTyxDQUFDLE1BQU07U0FDbkM7S0FDSixDQUFDO0FBQ0YsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsVUFBUyxHQUFHLEVBQUU7QUFDakQsV0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4QixXQUFHLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFTLElBQUksRUFBRTtBQUMxQixrQkFBTSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQ3JDLENBQUMsQ0FBQztLQUNOLENBQUMsQ0FBQzs7QUFFSCxjQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFCLGNBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztDQUNwQixDQUFDOztBQUdGLFlBQVksQ0FBQyxlQUFlLEdBQUksVUFBUyxLQUFLLEVBQUUsUUFBUSxFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFDO0FBQ3JGLFFBQUksVUFBVSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsUUFBUSxHQUFHLEdBQUcsR0FBRyxhQUFhLEdBQUcsR0FBRyxHQUFHLFVBQVUsQ0FBQztBQUNoRixVQUFNLENBQUMsS0FBSyxDQUFDLGlCQUFpQixHQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzNDLFFBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEMsUUFBSSxPQUFPLEdBQUc7QUFDVixZQUFJLEVBQUUsSUFBSTtBQUNWLFlBQUksRUFBRSxJQUFJO0FBQ1YsWUFBSSxFQUFFLFVBQVU7QUFDaEIsY0FBTSxFQUFFLE1BQU07QUFDZCxjQUFNLEVBQUU7QUFDSiwwQkFBYyxFQUFFLG1DQUFtQztBQUNuRCw0QkFBZ0IsRUFBRSxPQUFPLENBQUMsTUFBTTtTQUNuQztLQUNKLENBQUM7QUFDRixRQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUNqRCxXQUFHLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hCLFdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQVMsSUFBSSxFQUFFO0FBQzFCLGtCQUFNLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FDcEMsQ0FBQyxDQUFDO0tBQ04sQ0FBQyxDQUFDOztBQUVILGNBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDMUIsY0FBVSxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ3BCLENBQUM7O0FBRUYsWUFBWSxDQUFDLGVBQWUsR0FBSSxVQUFTLEtBQUssRUFBQyxHQUFHLEVBQUM7O0FBRS9DLFFBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEMsUUFBSSxPQUFPLEdBQUc7QUFDVixZQUFJLEVBQUUsSUFBSTtBQUNWLFlBQUksRUFBRSxJQUFJO0FBQ1YsWUFBSSxFQUFFLElBQUk7QUFDVixjQUFNLEVBQUUsTUFBTTtBQUNkLGNBQU0sRUFBRTtBQUNKLDBCQUFjLEVBQUUsbUNBQW1DO0FBQ25ELDRCQUFnQixFQUFFLE9BQU8sQ0FBQyxNQUFNO1NBQ25DO0tBQ0osQ0FBQztBQUNGLFFBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFVBQVMsR0FBRyxFQUFFO0FBQ2pELFdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEIsV0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBUyxJQUFJLEVBQUU7QUFDMUIsa0JBQU0sQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztTQUM1QyxDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7O0FBRUgsY0FBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQixjQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDcEIsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQyIsImZpbGUiOiJsaWJcXHRlc3R3YVxcbWlkZGxld2FyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJylcclxuICAgICxxdWVyeXN0cmluZyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5nJyk7XHJcblxyXG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnYXBwaXVtLWxvZ2dlcicpO1xyXG5sb2dnZXIgPSBsb2dnZXIuZ2V0TG9nZ2VyKCdBcHBpdW0nKTtcclxudmFyIHRlc3R3YVNlcnZlciA9IHt9O1xyXG5cclxudmFyIGhvc3QgPSdsb2NhbGhvc3QnO1xyXG52YXIgcG9ydCA9IDgwMDg7XHJcbnZhciBwYXRoID0gJy9hdHRwL2NsaWVudCc7XHJcblxyXG5cclxudGVzdHdhU2VydmVyLlNlbmREYXRhTmF0aXZlQXBwID0gIGZ1bmN0aW9uKHJlcGx5RGF0YSl7XHJcbiAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHJlcGx5RGF0YSk7XHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICBob3N0OiBob3N0LFxyXG4gICAgICAgIHBvcnQ6IHBvcnQsXHJcbiAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXI6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1MZW5ndGgnOiBjb250ZW50Lmxlbmd0aFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgcmVxX3Rlc3R3YSA9IGh0dHAucmVxdWVzdChvcHRpb25zLCBmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICByZXMuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcclxuICAgICAgICByZXMub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIiB3YUhlYXJ0IGJlYXRpbmchXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVxX3Rlc3R3YS53cml0ZShjb250ZW50KTtcclxuICAgIHJlcV90ZXN0d2EuZW5kKCk7XHJcbn07XHJcblxyXG5cclxudGVzdHdhU2VydmVyLlNlbmRTdGFydFN0YXR1cyA9ICBmdW5jdGlvbihkYXRhcywgZGV2aWNlaWQsIHRlc3RjYXNlbG9nSWQsIHRlc3R3YXBvcnQsIHJlcyl7XHJcbiAgICB2YXIgc3RhcnRfcGF0aCA9IHBhdGggKyAnLycgKyBkZXZpY2VpZCArICcvJyArIHRlc3RjYXNlbG9nSWQgKyAnLycgKyB0ZXN0d2Fwb3J0O1xyXG4gICAgbG9nZ2VyLmRlYnVnKFwiPT09c3RhcnRfcGF0aDogXCIrc3RhcnRfcGF0aCk7XHJcbiAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGFzKTtcclxuICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgIGhvc3Q6IGhvc3QsXHJcbiAgICAgICAgcG9ydDogcG9ydCxcclxuICAgICAgICBwYXRoOiBzdGFydF9wYXRoLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcjoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcbiAgICAgICAgICAgICdDb250ZW50LUxlbmd0aCc6IGNvbnRlbnQubGVuZ3RoXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciByZXFfdGVzdHdhID0gaHR0cC5yZXF1ZXN0KG9wdGlvbnMsIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgIHJlcy5zZXRFbmNvZGluZygndXRmOCcpO1xyXG4gICAgICAgIHJlcy5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwid2FIZWFydCBiZWF0aW5nIVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcV90ZXN0d2Eud3JpdGUoY29udGVudCk7XHJcbiAgICByZXFfdGVzdHdhLmVuZCgpO1xyXG59O1xyXG5cclxudGVzdHdhU2VydmVyLlNlbmREYXRhV2VidmlldyA9ICBmdW5jdGlvbihkYXRhcyxyZXMpe1xyXG5cclxuICAgIHZhciBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YXMpO1xyXG4gICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgaG9zdDogaG9zdCxcclxuICAgICAgICBwb3J0OiBwb3J0LFxyXG4gICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogY29udGVudC5sZW5ndGhcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIHJlcV90ZXN0d2EgPSBodHRwLnJlcXVlc3Qob3B0aW9ucywgZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgcmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7XHJcbiAgICAgICAgcmVzLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJ0ZXN0IHdlYnZpZXcgY2FzZSBpcyBvayFcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXFfdGVzdHdhLndyaXRlKGNvbnRlbnQpO1xyXG4gICAgcmVxX3Rlc3R3YS5lbmQoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdGVzdHdhU2VydmVyOyJdfQ==